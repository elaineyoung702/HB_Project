{% extends 'base.html' %}
{% block title %}Board Game Database{% endblock %}

{% block body %}
<div class="container-fluid">
    <h3>Click on the Column Headers to sort the database!</h3>
<br><br>
<table id="database" class="table table-striped table-bordered table-sm">
    <thead>
        <tr>
            <th></th>
            <th data-sort-attr="bg_name">Board Game Name</th>
            <th data-sort-attr="min_players">Minimum Players</th>
            <th data-sort-attr="max_players">Maximum Players</th>
            <th data-sort-attr="suggested_players">Suggested Players</th>
            <th data-sort-attr="playtime">Playtime</th>
            <th>Description</th>
            <th data-sort-attr="publisher">Publisher</th>
            <th data-sort-attr="year_published">Year Published</th>
            <th data-sort-attr="designer">Designer</th>
        </tr>
    </thead>
    <tbody>
    {% for bg in bg_obj_list %}
    <tr>
        <td><img src={{bg.thumbnail_url}}><br><br>




<!--             <form action="/new-favorite" method='POST'>
                <input type="text" name="bg_id" value={{bg.bg_id}} hidden>
                {% if session %}
                <input type="text" name="user_id" value={{user_id}} hidden>
                {% endif %}
                <input id="fav_button" type="submit" name="fav_button" value="Favorite">
            </form> -->
        </td>
        <td><a href="/boardgame/{{bg.bg_id}}">{{bg.bg_name}}</a><br><br>

            {% if bg.bg_id not in user_favs %}
                <button type="button" id={{bg.bg_id}}bg-id class="btn btn-light heart_btn"> <i id="heart" class="fa fa-heart-o heart_btn" aria-hidden="true"></i></button>
            {% else %}
                <button type="button" id={{bg.bg_id}}bg-id class="btn btn-light heart_btn"> <i id="heart" class="fa fa-heart heart_button"></i></button>
                <style> #heart {color : red;}</style>
            {% endif %}

        </td>
        <td>minimum {{bg.min_players}} players</td>
        <td>maximum {{bg.max_players}} players</td>
        <td>suggested {{bg.suggested_players}} players</td>
        <td>{{bg.playtime}} minutes</td>
        <td>{{bg.description|truncate(200, False, '...', 0)}}</td>
        <td>Publisher: {{bg.publisher}}</td>
        <td>published in {{bg.year_published}}</td>
        <td>Designer: {{bg.designer}}</td>
    </tr>
    {% endfor %}
    </tbody>

</table>
</div>


<script src="https://kit.fontawesome.com/6f41ffb181.js"></script>

<script>

    // applies formatting to database table
    $(document).ready(function () {
      $('#database').DataTable({
      });
    });

////////////////////
// function changeFavButton(response){

//     let favorited = response.favorited;
//     console.log(favorited);
//     let heart = document.querySelector('#heart');

//     if (favorited === "true") {
//       $('#heart').removeClass("fa-heart-o");
//       $('#heart').addClass("fa-heart");
//       heart.style.color = 'red';
//     }

//     else {
//       $('#heart').removeClass("fa-heart");
//       $('#heart').addClass("fa-heart-o");
//       $('#heart').attr("aria-hidden", "true");
//     }
//   }

  function favBoardGame(evt){
    console.log(evt);
    console.log(evt.target.id);
    let bg_id = evt.target.id;
    console.log(bg_id)
    console.log(bg_id - "bg-id");
    const inputs = {

    };

    console.log(inputs);

    // $.post('/new-favorite', inputs, changeFavButton);
  }

  $('.heart_btn').on('click', favBoardGame);





</script>

{% endblock %}